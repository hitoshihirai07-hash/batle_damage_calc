
:root{--bg:#0b1220;--panel:#111827;--ink:#e5e7eb;--mut:#9ca3af;--pri:#60a5fa;--br:#334155}
*{box-sizing:border-box}html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
.wrap{max-width:1200px;margin:0 auto;padding:14px}.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.brand{font-weight:800;font-size:18px}.badge{padding:2px 8px;border:1px solid var(--br);border-radius:9999px;color:#9ca3af;font-size:12px}
.tabs{display:flex;gap:6px;overflow:auto;padding:6px 0;margin-bottom:10px}.tab{padding:8px 12px;border:1px solid var(--br);border-radius:10px;white-space:nowrap;cursor:pointer;font-weight:600}
.tab[aria-selected=true]{background:#111b2e;border-color:#3b82f6;color:#fff}.panel{display:none;border:1px solid var(--br);border-radius:12px;padding:12px;background:var(--panel)}
.panel[aria-hidden=false]{display:block}.grid2{display:grid;grid-template-columns:1fr;gap:10px}@media(min-width:900px){.grid2{grid-template-columns:1fr 1fr}}
.row{display:flex;gap:6px;align-items:center;flex-wrap:wrap}label{font-size:12px;color:#9ca3af}
input[type=text],input[type=number],select{background:#0f172a;border:1px solid var(--br);color:#e5e7eb;padding:6px 8px;border-radius:8px;min-height:34px}
input[type=number]{width:90px}.btn{background:#1f2937;border:1px solid #3b82f6;color:#dbeafe;border-radius:8px;padding:8px 10px;cursor:pointer}
.table{width:100%;border-collapse:collapse}.table th,.table td{border:1px solid var(--br);padding:6px 8px;text-align:center}
.table th{background:#0f172a;color:#cbd5e1;position:sticky;top:0;z-index:1}.matrix td{font-variant-numeric:tabular-nums;white-space:nowrap}
.small{font-size:12px;color:#9ca3af}.pill{padding:4px 8px;border:1px solid var(--br);border-radius:9999px;font-size:12px}
.chips{display:flex;gap:6px;flex-wrap:wrap}.chip{padding:2px 6px;border:1px solid var(--br);border-radius:9999px;font-size:12px;color:#cbd5e1;background:#0f172a}
.counter{color:#9ca3af;font-size:12px}
.cards .card{margin-bottom:10px}
.divider{height:1px;background:var(--br);margin:10px 0}
.team-card{border:1px solid var(--br);border-radius:10px;padding:10px;margin:8px 0;background:#0f172a}
.team-card h4{margin:0 0 6px 0}
.team-table{width:100%;border-collapse:collapse}
.team-table th,.team-table td{border:1px solid var(--br);padding:4px 6px;text-align:left;font-size:13px}
.filters{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:8px}
#matrix_bar{position:sticky;top:0;z-index:5;display:flex;gap:8px;align-items:center;background:#0b1220;border:1px solid var(--br);border-radius:10px;padding:8px;margin:8px 0}
#opp_picker{display:none;gap:8px;align-items:center}

/* === KO label colors === */
.mtx-ohko{background:rgba(239,68,68,.18);border-color:#ef4444;color:#fecaca}
.mtx-thko2{background:rgba(234,179,8,.16);border-color:#eab308;color:#fde68a}
.mtx-thko3{background:rgba(34,197,94,.16);border-color:#22c55e;color:#bbf7d0}
.mtx-chip{background:rgba(148,163,184,.10);color:#cbd5e1}
.matrix td .mtx-pct{font-weight:600}
.matrix td .mtx-mv{font-size:11px;opacity:.85;margin-top:2px}

/* === Timer styles === */
.timer-wrap{display:flex;flex-direction:column;gap:12px}
.timer-row{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
.timer-face{font-size:40px;font-weight:800;letter-spacing:1px;padding:8px 12px;border:1px solid var(--br);border-radius:12px;background:#0f172a}
.timer-btn{padding:8px 12px;border-radius:10px;border:1px solid #3b82f6;background:#1f2937;color:#dbeafe;cursor:pointer}
.timer-preset .timer-btn{border-color:#475569}
.timer-face.warn{animation:blink 0.9s steps(2,end) infinite;border-color:#ef4444;color:#fecaca}
@keyframes blink{50%{opacity:.35}}

/* === Single calc === */
.single-grid{display:grid;grid-template-columns:1fr;gap:12px}
@media(min-width:900px){.single-grid{grid-template-columns:1fr 1fr}}
.single-card{border:1px solid var(--br);border-radius:12px;background:#0f172a;padding:10px}
.single-footer{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:8px}
.result-box{border:1px solid var(--br);border-radius:12px;padding:10px;background:#0b1325}
.result-box h4{margin:0 0 6px 0}
.result-pct{font-size:22px;font-weight:800}
.result-detail{font-size:12px;color:#9ca3af;line-height:1.5}

/* === Timer Dock (always visible) === */
.timer-dock{position:sticky;top:6px;z-index:50;display:flex;gap:10px;align-items:center;justify-content:space-between;
  background:#0b1220;border:1px solid var(--br);border-radius:12px;padding:8px 10px;margin:6px 0}
.timer-dock .left{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.timer-dock .right{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.timer-mini{font-size:28px;font-weight:800;letter-spacing:1px;padding:4px 8px;border:1px solid var(--br);border-radius:10px;background:#0f172a}
.timer-mini.warn{animation:blink .9s steps(2,end) infinite;border-color:#ef4444;color:#fecaca}
.timer-input{display:flex;gap:6px;align-items:center}
.timer-input input{width:70px}
#tmr_log_panel{display:none;margin-top:6px}
@media(max-width:640px){.timer-input input{width:58px} .timer-minor{display:none}}

/* v20: EV preset buttons for single calc */
.ev-presets{display:flex;flex-wrap:wrap;gap:6px;margin-top:4px}
.ev-presets .btn{padding:6px 8px}

/* v21 single calc controls */
.row .rank{display:inline-flex;gap:6px;align-items:center}
.row .rank select{min-width:64px}

/* v23: hide any extra timer docks just in case */
.timer-dock:not(:first-of-type){display:none!important}

/* v25 timer/top-only */
.timer-dock{position:sticky;top:6px;z-index:50;display:flex;gap:10px;align-items:center;justify-content:flex-start;background:#0b1220;border:1px solid var(--br);border-radius:12px;padding:8px 10px;margin:6px 0}
.timer-dock:not(:first-of-type){display:none!important}
.timer-mini{font-size:28px;font-weight:800;padding:4px 8px;border:1px solid var(--br);border-radius:10px;background:#0f172a}
.timer-btn{padding:6px 10px}
.timer-input{display:flex;gap:6px;align-items:center}
.timer-input input{width:70px}

/* v27 timer (top only) */
.timer-dock{position:sticky;top:8px;z-index:100;display:flex;gap:10px;align-items:center;background:#0b1220;border:1px solid var(--br);border-radius:12px;padding:8px 12px;margin:8px 0}
.timer-dock:not(:first-of-type){display:none!important}
.timer-face{font-size:28px;font-weight:800;padding:2px 10px;border:1px solid var(--br);border-radius:8px;background:#0f172a}
.timer-btn{padding:6px 10px}
.timer-input{display:flex;gap:6px;align-items:center}
.timer-input input{width:70px}

/* v29: fixed header timer */
#bdc_timer{position:fixed;top:8px;left:50%;transform:translateX(-50%);z-index:1000;
  display:flex;gap:8px;align-items:center;padding:6px 10px;border:1px solid var(--br);
  background:#0b1220;border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,.35)}
#bdc_timer .face{font-size:26px;font-weight:800;padding:2px 10px;border:1px solid var(--br);border-radius:8px;background:#0f172a}
#bdc_timer button{padding:6px 10px}
#bdc_timer .inputs{display:flex;gap:6px;align-items:center}
/* hide any legacy preset clusters we don't want */
.legacy-timer,.legacy-presets,.timer-log{display:none!important}
/* style for injected 6x6 ev bar */
.evbar7{display:flex;flex-wrap:wrap;gap:6px;margin:6px 0}
.evbar7 .btn{padding:4px 8px;border:1px solid var(--br);background:#132034;border-radius:8px}

/* v30: move overlay timer to top-right and shrink */
#bdc_timer{left:auto;right:12px;transform:none;top:8px}
#bdc_timer .face{font-size:22px;padding:2px 8px}
#bdc_timer button{padding:4px 8px;font-size:14px}
#bdc_timer .inputs input{width:60px}
@media (max-width: 640px){
  #bdc_timer{right:8px;gap:6px}
  #bdc_timer .face{font-size:20px}
  #bdc_timer button{padding:3px 6px;font-size:13px}
  #bdc_timer .inputs{display:none} /* 小画面は20分ボタンのみで運用 */
}
